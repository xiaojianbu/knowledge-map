# TS 在 vue 中的使用

这绝对不只修改 Webpack 配置的一个加载器条目那么简单。我必须为 TS 提供专门的配置，用 TSLint 替换 ESLint，集成 TypeScript 加载器和 Babel，将 TS 集成到 Jest 中。

Jest 和 CSS 模块存在一些问题。你迟早也会遇到这些问题。而且不要认为现在可以抛弃 Babel 了——TypeScript 不会为新特性提供任何 polyfill，也不会将新 API 转换为旧浏览器可以理解的代码。

所以我的建议是——如果可以的话，考虑使用一些项目启动工具或支持 TS 的 CLI，把自己从繁杂的项目配置中解救出来。

非常不愉快的体验与 TypeScript 支持的库数量有关。

如果你是 NPM 包的作者，你通常会提供随时可用的 JavaScript 包。有时候，你还会公开 ES6 源代码。如果你要让库支持 TypeScript，必须提供类型定义。简单来说就是一个包含模块、命名空间、类、方法、函数等内容的声明性文件。TypeScript 模块只能使用文件中所描述的内容，并且只能通过声明中所指定的方式使用它们。可惜的是，源代码和声明文件之间通常没有严格的联系。它们可能无法保持一致，或者过时了，或者丢失了。

对于我来说，丢失声明并不是个大问题。大多数流行库的作者或社区都会准备好类型定义。如果你使用的包没有这样的文件，就使用其他的，NPM 上有很多包提供了相同的功能。你也可以自己准备“虚拟”的定义，或自己创建定义，并贡献给开源社区。

但不管怎样，还有另一个更严重的问题——一些声明是不正确的，或者过时了。如果你遇到这样的问题，要解决这个问题就没那么容易了。你可以使用旧版本的包，或者自行进行修复，或者等待作者更新。不过有时候他们反应很快，有时候也很慢。

好的：

类型

静态类型是 TS 最常用的特性。如果不使用严格类型，那么使用 TypeScript 就没有意义了。当然，你也可以使用宽容的“any”类型，这意味着“我不关心那个东西是什么类型，它可能是一个数字，也可能是一个字符串数组”。但说实在的，如果你想这样写代码，好不如直接使用 JavaScript。

类型可以提升编码速度，写出更安全的代码。

接口

如果你认为类型是“游戏规则改变者”，那么接口呢？接口可以帮你写出更好的代码，因为你可以用它们定义对象之间的契约。我创建了很多接口，它们无处不在。有时我会把接口放在专门的文件中。

我主要使用接口来描述对象、类、函数和参数。你也可以在模块之间共享它们，并像处理源代码中的实体一样对待它们。你只需要记住——运行时没有接口，这点很容易被忘记。这就是为什么在某些情况下使用类而不是接口（例如 Angular 的依赖注入）会更好。

代码质量

为什么说使用 TypeScript 可以提升代码质量呢？

可以避免一些非常烦人的运行时错误，这些错误是因为参数名或变量名输入错误导致的；
你可以在对象之间创建清晰的契约；
可以很自然地实现私有成员或类；
编译器会立即给出反馈，很多错误都可以在编译阶段捕获，而不是在运行时；
非 JS 开发人员更容易阅读和理解代码；
你可以使用未来版本的 JavaScript 才会提供的特性；
可以更容易地为进行单元测试（打桩），因为你知道它们的接口是怎样的。
