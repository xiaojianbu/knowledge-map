# XSS 和 CSRF

CSRF：跨站请求伪造 冒充用户发起请求(不是 AJAX)

1. 浏览并登录信任网站 A
2. 验证通过，在用户处（C）产生 A 的 cookie
3. 用户在没有登出 A 网站的情况下，访问危险网站 B
4. B 要求访问第三方站点（A），发出一个请求
5. 根据 B 在 4 的请求，浏览器带着 2 产生的 cookie 访问 A
6. A 不知道 5 中的请求是 C 发出的还是 B 发出的，由于浏览器会自动带上用户 C 的 cookie，所以 A 会根据用户的权限处理 5 的请求，这样 B 就达到了模拟用户操作的目的。

XSS：跨站脚本攻击，恶意的注入 html 代码，其他用户访问时，会被执行 特点：能注入恶意的 HTML/JavaScript 代码到用户浏览的网页上，从而达到 Cookie 资料窃取、会话劫持、钓鱼欺骗等攻击。

## XSS 的防范

两端进行输入格式检查

通过编码转义的方式进行输出检查

浏览器禁止页面的 JS 访问带有 HttpOnly 属性的 Cookie

## CSRF 的防范一般这几种

1. 验证码,用户体验虽然不好,,但是很多场合下可以防范大多数攻击
2. 验证 HTTP Referer 字段,判断请求来源
3. token 加密解密,这种是目前很常用的手段了

   第一步：后端随机产生一个 token，把这个 token 保存到 session 状态中；同时后端把这个 token 交给前端页面；

   第二步：前端页面提交请求时，把 token 加入到请求数据或者头信息中，一起传给后端；

   后端验证前端传来的 token 与 session 是否一致，一致则合法，否则是非法请求。

## 参考

[前端安全知识](https://juejin.im/post/59dc2b7a6fb9a0451869ae3a)
